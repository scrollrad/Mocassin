<UserControl
  x:Class="Mocassin.UI.GUI.Controls.ProjectConsole.SubControls.OperationConsole.OperationReportConsoleView"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
  xmlns:local="clr-namespace:Mocassin.UI.GUI.Controls.ProjectConsole.SubControls.OperationConsole"
  d:DataContext="{d:DesignInstance local:OperationReportConsoleViewModel, IsDesignTimeCreatable=True}"
  mc:Ignorable="d"
  d:DesignHeight="450" d:DesignWidth="800"
  Background="Transparent">

  <Grid>
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto" />
      <RowDefinition Height="*" />
    </Grid.RowDefinitions>
    <DockPanel Grid.Row="0" 
               HorizontalAlignment="Left">
      <TextBlock Text="Source:" 
                 VerticalAlignment="Center"
                 Margin="{StaticResource App.Margin.HorizontalStack}"/>

      <ComboBox ItemsSource="{Binding ProjectGraphs}"
                SelectedItem="{Binding SelectedProjectGraph}"
                DisplayMemberPath="ProjectName"
                Margin="{StaticResource App.Margin.HorizontalStack}"
                ToolTip="{StaticResource App.ToolTip.ProjectSelection}"
                VerticalAlignment="Center"/>

      <TextBlock Text="Error filtered:" 
                 VerticalAlignment="Center"
                 Margin="{StaticResource App.Margin.HorizontalStack}"/>

      <CheckBox IsChecked="{Binding IsErrorContentFiltered}" 
                VerticalAlignment="Center" 
                Margin="{StaticResource App.Margin.HorizontalStack}"/>

      <TextBlock Text="Ignore incoming updates:" 
                 VerticalAlignment="Center"
                 Margin="{StaticResource App.Margin.HorizontalStack}"/>

      <CheckBox IsChecked="{Binding ValidatorViewModel.IsIgnoreContentChange}" 
                VerticalAlignment="Center" 
                Margin="{StaticResource App.Margin.HorizontalStack}"/>

    </DockPanel>
    <DataGrid Grid.Row="1"
              Name="ReportDataGrid"
              ItemsSource="{Binding OperationCollectionViewModel.ObservableItems}"
              SelectedItem="{Binding SelectedReport}"
              AutoGenerateColumns="False"
              IsReadOnly="True"
              VerticalScrollBarVisibility="Auto"
              RowDetailsVisibilityMode="VisibleWhenSelected"
              GridLinesVisibility="None"
              Background="Transparent">

      <i:Interaction.Triggers>
        <i:EventTrigger EventName="MouseEnter">
          <i:InvokeCommandAction Command="{Binding SoftUpdateStopCommand}" CommandParameter="{StaticResource Bool.True}"/>
        </i:EventTrigger>
        <i:EventTrigger EventName="MouseLeave">
          <i:InvokeCommandAction Command="{Binding SoftUpdateStopCommand}" CommandParameter="{StaticResource Bool.False}"/>
        </i:EventTrigger>
      </i:Interaction.Triggers>

      <DataGrid.RowStyle>
        <Style TargetType="DataGridRow">
          <Setter Property="ToolTip">
            <Setter.Value>
              <TextBlock Text="{Binding}" TextWrapping="Wrap"/>
            </Setter.Value>
          </Setter>
        </Style>
      </DataGrid.RowStyle>

      <DataGrid.Columns>
        <DataGridTextColumn Header="Time Stamp"
                            Width="Auto"
                            Binding="{Binding TimeStamp, Mode=OneWay}" />
        <DataGridTextColumn Header="Operation"
                            Width="Auto"
                            Binding="{Binding OperationDescription, Mode=OneWay}" />
        <DataGridCheckBoxColumn Header="Accepted"
                                Width="Auto"
                                Binding="{Binding IsGood, Mode=OneWay}" />
        <DataGridCheckBoxColumn Header="Invalid"
                                Width="Auto"
                                Binding="{Binding HasValidationError, Mode=OneWay}" />        
        <DataGridCheckBoxColumn Header="Conflict"
                                Width="Auto"
                                Binding="{Binding HasUnsolvedConflict, Mode=OneWay}" />
        <DataGridCheckBoxColumn Header="Exception"
                                Width="Auto"
                                Binding="{Binding IsError, Mode=OneWay}" />

      </DataGrid.Columns>
    </DataGrid>
  </Grid>
</UserControl>
